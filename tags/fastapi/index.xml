<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Fastapi on zrquan</title><link>https://zrquan.github.io/tags/fastapi/</link><description>Recent content in Fastapi on zrquan</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sun, 08 Dec 2024 00:00:00 +0800</lastBuildDate><atom:link href="https://zrquan.github.io/tags/fastapi/index.xml" rel="self" type="application/rss+xml"/><item><title>调试容器中的 FastAPI 应用</title><link>https://zrquan.github.io/posts/debug-fastapi-in-container/</link><pubDate>Sun, 08 Dec 2024 00:00:00 +0800</pubDate><guid>https://zrquan.github.io/posts/debug-fastapi-in-container/</guid><description>&lt;ol>
&lt;li>
&lt;p>镜像中需添加 &lt;a href="https://github.com/microsoft/debugpy" target="_blank">debugpy&lt;/a> 依赖库，并在启动容器时运行 debugpy 模块&lt;/p>
&lt;pre>&lt;code class="language-dockerfile">FROM tiangolo/uvicorn-gunicorn-fastapi:python3.7
# Note: In default, the working directory is /app in this base image.

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 5678
EXPOSE 8000

COPY ./app /app
ENTRYPOINT [&amp;quot;python3&amp;quot;, &amp;quot;-m&amp;quot;, &amp;quot;debugpy&amp;quot;, &amp;quot;--listen&amp;quot;, &amp;quot;0.0.0.0:5678&amp;quot;, &amp;quot;-m&amp;quot;, &amp;quot;uvicorn&amp;quot;, &amp;quot;main:app&amp;quot;, &amp;quot;--reload&amp;quot;, &amp;quot;--host&amp;quot;, &amp;quot;0.0.0.0&amp;quot;, &amp;quot;--port&amp;quot;, &amp;quot;8000&amp;quot;]
&lt;/code>&lt;/pre>
&lt;div class="src-block-caption">
 &lt;span class="src-block-number">Code Snippet 1:&lt;/span>
 Dockerfile
&lt;/div>
&lt;/li>
&lt;li>
&lt;p>运行时连接 debugpy 服务端的监听端口，并设置本地和容器的项目路径映射&lt;/p>
&lt;pre>&lt;code class="language-json">{
 &amp;quot;version&amp;quot;: &amp;quot;0.2.0&amp;quot;,
 &amp;quot;configurations&amp;quot;: [
 {
 &amp;quot;name&amp;quot;: &amp;quot;Python: FastAPI Container Debug&amp;quot;,
 &amp;quot;type&amp;quot;: &amp;quot;debugpy&amp;quot;,
 &amp;quot;request&amp;quot;: &amp;quot;attach&amp;quot;,
 &amp;quot;connect&amp;quot;: {
 &amp;quot;port&amp;quot;: 5678,
 &amp;quot;host&amp;quot;: &amp;quot;localhost&amp;quot;,
 },
 &amp;quot;pathMappings&amp;quot;: [
 {
 &amp;quot;localRoot&amp;quot;: &amp;quot;${workspaceFolder}/app&amp;quot;,
 &amp;quot;remoteRoot&amp;quot;: &amp;quot;/app&amp;quot;
 }
 ]
 }
 ]
}
&lt;/code>&lt;/pre>
&lt;div class="src-block-caption">
 &lt;span class="src-block-number">Code Snippet 2:&lt;/span>
 .vscode/launch.json
&lt;/div>
&lt;/li>
&lt;/ol></description></item></channel></rss>